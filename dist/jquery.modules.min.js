!function(t,e,$){"use strict";var n={},i=["action","destroy","init","trigger"];$.fn.module=function(i,r){var o={};"boolean"===$.type(r)&&(r={singleton:r}),o=$.extend({},{singleton:!1},r);var a={extend:function(n,i){var r=$.extend({},{components:{window:t,document:e},actions:{},events:{}},i),o={},a=[];return o.$el=n,o.data={},$.each(r.components,function(t,e){if("el"!==t)switch($.type(e)){case"string":case"array":o["$"+t]=o.$el.find(e);break;case"function":o["$"+t]=e.call(o.$el)}}),$.each(r.events,function(t,e){var n=t.match(/^([\w]+)\(([^)]+)\)$/),i=null,r;if("array"===$.type(n)&&n.length>=2?(i=n[1],r=n[2]):i=t,-1===["string","array"].indexOf($.type(e)))throw"Unsupported event action parameter";o.$el.on(i,r,function(t){var n=$(this);if("array"===$.type(e))$.each(e,function(e,i){return o.action(i,t,n)});else if("string"===$.type(e))return o.action(e,t,n)}),-1===a.indexOf(i)&&a.push(i)}),o.init=function(){return"function"===$.type(r.init)&&(r.init.call(o),delete o.init),o},o.destroy=function(){"function"===$.type(r.destroy)&&(r.destroy.call(o),delete o.destroy),$.each(a,function(t){o.$el.off(t)}),a=null,o=null,r=null},o.action=function(){var t=arguments[0],e=Array.prototype.splice.call(arguments,1);return r.actions[t]&&r.actions[t].apply?r.actions[t].apply(o,e):void 0},o.trigger=function(){var t=arguments[0],e=Array.prototype.splice.call(arguments,1);return o.$el.trigger(t,e),o},o.digest=function(){throw"Not implemented!"},o}},s=this.selector;if(n[s]||(n[s]=[]),o.singleton)if("destroy"===i)n[s]&&(n[s].destroy(),delete n[s]);else{if(n[s])throw"Hey, you are trying to re-initialize singleton module. This is no-no!";var c=n[s]=a.extend(this,i);c.init()}else this.each(function(){var t=$(this);if("destroy"===i)$.map(n[s],function(t){t.destroy()}),n[s].length=0;else{var e=a.extend(t,i);e.init(),n[s].push(e)}});return this}}(this,this.document,jQuery);